# í•«ë”œ ì—°êµ¬ì†Œ (HOTDEAL LAB)

ğŸ” **AI ê¸°ë°˜ ì‹¤ì‹œê°„ ì»¤ë®¤ë‹ˆí‹° í•«ë”œ íë ˆì´ì…˜ ë° ì‹œë§¨í‹± ì¶”ì²œ í”Œë«í¼**
ì„œë²„ë¦¬ìŠ¤(Serverless) ì•„í‚¤í…ì²˜ ìœ„ì—ì„œ ë°ì´í„° ìˆ˜ì§‘, AI ë¶„ì„, Vector DB ê²€ìƒ‰ì´ ë§¤ë„ëŸ½ê²Œ ì—°ê²°ë˜ëŠ” í’€ìŠ¤íƒ í”„ë¡œì íŠ¸ì„.

---

## 1. ê¸°íš ë°°ê²½ ë° ë¬¸ì œ ì •ì˜

**"ìŸì•„ì§€ëŠ” ì •ë³´ ì†ì—ì„œ, ë‚˜ì—ê²Œ ì§„ì§œ í•„ìš”í•œ í•«ë”œë§Œ ê³¨ë¼ë³¼ ìˆ˜ëŠ” ì—†ì„ê¹Œ?"**
ê¸°ì¡´ ì»¤ë®¤ë‹ˆí‹°ì˜ í•«ë”œ ê²Œì‹œíŒì€ í•˜ë£¨ì—ë„ ìˆ˜ë°± ê°œì˜ ê¸€ì´ ì˜¬ë¼ì˜¤ë©°, ì´ ì¤‘ ìƒë‹¹ìˆ˜ëŠ” ë‚˜ì™€ ë¬´ê´€í•œ ì œí’ˆì´ê±°ë‚˜ êµë¬˜í•œ ë°”ì´ëŸ´/ê´‘ê³ ì„± ê¸€ì„. ì‚¬ìš©ìëŠ” ì›í•˜ëŠ” í• ì¸ ì •ë³´ë¥¼ ì°¾ê¸° ìœ„í•´ ë¶ˆí•„ìš”í•œ í”¼ë¡œë„ë¥¼ ëŠê»´ì•¼ í–ˆìŒ.

ì´ì— **ë‹¨ìˆœí•œ í‚¤ì›Œë“œ ì•Œë¦¼ì„ ë„˜ì–´, AIê°€ ë¬¸ë§¥ì„ ì´í•´í•˜ê³  ê°€ì¹˜ë¥¼ íŒë‹¨í•˜ì—¬ ë‚˜ë§Œì˜ ë§ì¶¤í˜• í•«ë”œì„ ì¶”ì²œí•´ ì£¼ëŠ” ì„œë¹„ìŠ¤**ë¥¼ ê¸°íší•˜ê²Œ ë¨.

---

## 2. í•µì‹¬ ë„ì… ê¸°ìˆ  ë° AI í™œìš© ê¸°ëŒ“ê°’

ë³¸ í”„ë¡œì íŠ¸ëŠ” ê¸°íš ë‹¨ê³„ë¶€í„° ë°ì´í„° ì •ì œì™€ ê²€ìƒ‰ ê²½í—˜ í–¥ìƒì„ ìœ„í•´ **Google Gemini AI ìƒíƒœê³„**ë¥¼ ì „ëµì ìœ¼ë¡œ ë„ì…í•¨.

### 2-1. ë°ì´í„° íŒŒì´í”„ë¼ì¸ ì •ì œ (`gemini-3-flash`)
* **ë„ì… ë°°ê²½:** ìˆ˜ë§ì€ ë¯¸ê°€ê³µ í•«ë”œ ë°ì´í„° ì¤‘ ê´‘ê³ ì„± ê¸€ í˜¹ì€ ìŠ¤íŒ¸ì„± ê¸€ì„ êµ¬ë¶„í•˜ëŠ” ê²ƒì€ ë‹¨ìˆœí•œ í¬ë¡¤ë§ë§Œìœ¼ë¡œëŠ” í•œê³„ê°€ ìˆì—ˆìŒ.
* **ì›ë¦¬ ë° íš¨ê³¼:** ë°±ê·¸ë¼ìš´ë“œ í¬ë¡¤ëŸ¬ê°€ ìˆ˜ì§‘í•œ ë°ì´í„°ë¥¼ AIê°€ ì¦‰ê° ë¶„ì„í•¨. ìœ ì €ë“¤ì˜ ëŒ“ê¸€ ë‰˜ì•™ìŠ¤ë¥¼ íŒŒì•…í•´ ë°”ì´ëŸ´ ìŠ¤íŒ¸ì„ ì°¨ë‹¨í•˜ê³ , ê°€ì¹˜ ìˆëŠ” ìƒí’ˆì— ë§¤ì¹­ ì ìˆ˜ì™€ 1ì¤„ ìš”ì•½(`ai_summary`)ì„ ë¶€ì—¬í•˜ì—¬ **ë°ì´í„°ë² ì´ìŠ¤ì˜ ì‹ ë¢°ë„ë¥¼ ê·¹ëŒ€í™”**í•¨. ì´ ê³¼ì •ì—ì„œ ë„¤ì´ë²„ ìµœì €ê°€ ì •ë³´ë¥¼ ê°€ì ¸ì™€ ë¹„êµí•˜ëŠ” ë¡œì§ë„ í¬í•¨ë¨.

### 2-2. AI ê¸°ë°˜ ì‹œë§¨í‹±(Semantic) ê²€ìƒ‰ ë° ë§ì¶¤í˜• ì¶”ì²œ
* **ë„ì… ë°°ê²½:** ê¸°ì¡´ì˜ ë‹¨ìˆœ í‚¤ì›Œë“œ ê²€ìƒ‰(`ilike`)ì€ ì‚¬ìš©ìê°€ ì •í™•í•œ ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ì§€ ì•Šìœ¼ë©´ ê²°ê³¼ë¥¼ ì°¾ì§€ ëª»í•˜ëŠ” í•œê³„(Low Recall)ê°€ ìˆì—ˆìŒ. ì˜ˆë¥¼ ë“¤ì–´ "ì£¼ë§ ìº í•‘ìš© ê³ ê¸° ì¶”ì²œí•´ì¤˜" ê°™ì€ ëª…í™•í•˜ì§€ ì•Šì€ ì¼ìƒì–´ ìš”ì²­ì— ëŒ€í•´ì„œë„ ì‹œìŠ¤í…œì´ ë¬¸ë§¥ì„ ì´í•´í•˜ê³  ë§¤ì¹­í•  ìˆ˜ ìˆì–´ì•¼ í–ˆìŒ.
* **ì›ë¦¬ ë° íš¨ê³¼ (ë°ì´í„° ì €ì¥ ~ ê²€ìƒ‰):** 
  1. **ë°ì´í„° ì €ì¥ (`gemini-embedding-001`):** ìƒí’ˆëª…, ì¹´í…Œê³ ë¦¬ ë“±ì˜ í…ìŠ¤íŠ¸ë¥¼ AIê°€ 768ì°¨ì›ì˜ ìˆ˜í•™ì  ë²¡í„°(Vector)ë¡œ ë³€í™˜í•´ Supabase Vector DBì— ë¯¸ë¦¬ ì €ì¥í•¨. (ì˜ë¯¸ë¡ ì  ë°ì´í„° ê³µê°„ êµ¬ì¶•)
  2. **ì¡°íšŒ ë° ì¶”ì²œ (`gemini-2.5-flash`):** AIê°€ ìœ ì €ì˜ ë¬¸ë§¥ì„ ë¶„ì„í•´ ê²€ìƒ‰ ì˜ë„ë¥¼ ë²¡í„°ë¡œ ë³€í™˜í•œ ë’¤, DBì— ì ì¬ëœ í•«ë”œ ë²¡í„°ë“¤ê³¼ **ì½”ì‚¬ì¸ ìœ ì‚¬ë„(Cosine Similarity)**ë¥¼ ì—°ì‚°í•¨. ê±°ë¦¬ê°€ ê°€ì¥ ê°€ê¹ê³  ë¬¸ë§¥ì´ ì¼ì¹˜í•˜ëŠ” ìµœìƒìœ„ ê²°ê³¼ë¥¼ ë„ì¶œí•¨ìœ¼ë¡œì¨, ì‚¬ìš©ìëŠ” ë”±ë”±í•œ ì¿¼ë¦¬ ì—†ì´ ì‚¬ëŒê³¼ ëŒ€í™”í•˜ë“¯ ì›í•˜ëŠ” í•«ë”œì„ ì°¾ì„ ìˆ˜ ìˆìŒ.

### 2-3. ë¬´ì¤‘ë‹¨ ì„œë¹„ìŠ¤ í´ë°± ì•„í‚¤í…ì²˜ (`gemini-2.5-flash-lite`)
* **ë„ì… ë°°ê²½:** AI API íŠ¹ì„±ìƒ íŠ¸ë˜í”½ì´ ëª°ë¦´ ê²½ìš° Rate Limit(429 Error)ì´ ë°œìƒí•˜ì—¬ ì„œë¹„ìŠ¤ ê²½í—˜ì´ ëŠê¸¸ ìœ„í—˜ì´ ì¡´ì¬í–ˆìŒ.
* **ì›ë¦¬ ë° íš¨ê³¼:** ë©”ì¸ ì¶”ë¡  ëª¨ë¸ ì‘ë‹µ ì§€ì—°/ì‹¤íŒ¨ ê°ì§€ ì‹œ, ì—ëŸ¬ë¥¼ ë±‰ëŠ” ëŒ€ì‹  **ì¦‰ê°ì ìœ¼ë¡œ ë¹ ë¥´ê³  ê°€ë²¼ìš´ ë°±ì—… ëª¨ë¸(Flash-Lite)ë¡œ íŠ¸ë˜í”½ì„ ìš°íšŒ(Fallback)**í•˜ëŠ” ë¡œì§ì„ ì„¤ê³„í•¨. ì´ë¥¼ í†µí•´ ì„œë²„ë¦¬ìŠ¤ í™˜ê²½ì—ì„œë„ **100%ì— ê°€ê¹Œìš´ ê°€ìš©ì„±ê³¼ ì‘ë‹µì„±ì„ ë³´ì¥**í•¨.

---

## 3. íŠ¸ëŸ¬ë¸”ìŠˆíŒ… 

### 3-1. í‚¤ì›Œë“œ ê²€ìƒ‰ì˜ í•œê³„ ëŒíŒŒ (RDBMS `ilike` â†’ Vector DB ë§ˆì´ê·¸ë ˆì´ì…˜)
* **Problem:** ì´ˆê¸° ê°œë°œ ì‹œì—ëŠ” AIê°€ ìœ ì € ê²€ìƒ‰ì–´ì—ì„œ ëŒ€í‘œ í‚¤ì›Œë“œ ë°°ì—´ì„ ë½‘ì•„ë‚´ì–´ RDBMSì˜ `ilike OR` ì¿¼ë¦¬ë¡œ ë§¤ì¹­í–ˆìŒ. í•˜ì§€ë§Œ 'ì†Œì‹œì§€'ë¥¼ ê²€ìƒ‰í•˜ë©´ 'í•«ë„ê·¸' í•«ë”œì„ ë†“ì¹˜ê³ , ë„ˆë¬´ í¬ê´„ì ì¸ ë‹¨ì–´ëŠ” ê´€ë ¨ ì—†ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¹˜ëª…ì  í•œê³„ê°€ ìˆì—ˆìŒ.
* **Action:** í…ìŠ¤íŠ¸ë¥¼ ê³ ì°¨ì› ìˆ˜ì¹˜ë¡œ ë³€í™˜í•˜ëŠ” `gemini-embedding-001`ì„ ë„ì…í•˜ê³ , Supabaseì— `pgvector` í™•ì¥ì„ ì ìš©í•´ **ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê²€ìƒ‰ ì „ìš© RPC í•¨ìˆ˜**ë¥¼ êµ¬ì¶•í•¨.
* **Result:** ë™ì˜ì–´ë‚˜ ì€ìœ ì  í‘œí˜„("ë‹¤ì´ì–´íŠ¸ ê°„ì‹")ì—ë„ ì°°ë–¡ê°™ì´ ë°˜ì‘í•˜ëŠ” ë†’ì€ í’ˆì§ˆì˜ ê²€ìƒ‰ ì‹œìŠ¤í…œìœ¼ë¡œ ì§„í™”í–ˆìœ¼ë©°, RDBMSì™€ Vector Searchì˜ íŒ¨ëŸ¬ë‹¤ì„ ì°¨ì´ë¥¼ ì™„ë²½íˆ ì²´ê°í•¨.

### 3-2. AI API Rate Limit(RPD/RPM) ìµœì í™” ë° ëª¨ë¸ ë¶„ë°° ì „ëµ
* **Problem:** ì´ˆê¸° ì„œë¹„ìŠ¤ í™˜ê²½ì—ì„œëŠ” AI ëª¨ë¸ì˜ ë¶„ë‹¹ ìš”ì²­ ì œí•œ(RPM)ê³¼ ì¼ì¼ ìš”ì²­ ì œí•œ(RPD)ìœ¼ë¡œ ì¸í•œ ë³‘ëª© í˜„ìƒì´ ë¬¸ì œì˜€ìŒ. ì‹¤ì‹œê°„ í¬ë¡¤ë§ ì •ì œ, ë²¡í„° ë³€í™˜, ìœ ì € ê²€ìƒ‰ì´ ë™ì‹œì— ë°œìƒí•˜ë©´ 429(Too Many Requests) ì—ëŸ¬ë¡œ ì¸í•´ ì‹œìŠ¤í…œì´ ë§ˆë¹„ë  ìœ„í—˜ì´ ì»¸ìŒ.
* **Action:** íƒ€ê²Ÿ ê¸°ëŠ¥ì— ë§ì¶° ìµœì ì˜ ëª¨ë¸ì„ ë¶„ë°°í•˜ê³ , API í˜¸ì¶œ íšŸìˆ˜ë¥¼ ìµœì†Œí™”í•˜ê¸° ìœ„í•´ ë‹¤ì¤‘ ìš”ì•½ì„ ë¬¶ëŠ”(Batch) ë¡œì§ì„ ë„ì…í•¨.
  1. **í¬ë¡¤ë§ ì •ì œ (`gemini-3-flash`):** ë°±ê·¸ë¼ìš´ë“œì—ì„œ ìˆ˜ì§‘ë˜ëŠ” ìˆ˜ë§ì€ í•«ë”œì„ ê±´ë‹¹ ì²˜ë¦¬í•˜ë©´ RPMì´ ì´ˆê³¼ë¨. ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ í•«ë”œ ë°ì´í„°ë¥¼ **ìµœëŒ€ 10~20ê°œ ë‹¨ìœ„ë¡œ ë¬¶ì–´ì„œ(Batch)** í•˜ë‚˜ì˜ í”„ë¡¬í”„íŠ¸ë¡œ ì „ì†¡í•˜ì—¬ í•œ ë²ˆì— ë¶„ì„ ê²°ê³¼ë¥¼ ë°°ì—´ í˜•íƒœë¡œ ë°˜í™˜ë°›ìŒ. ê²°ë¡ ì ìœ¼ë¡œ API í˜¸ì¶œ íšŸìˆ˜ë¥¼ íšê¸°ì ìœ¼ë¡œ ë‚®ì¶¤.
  2. **ë²¡í„° ë³€í™˜ (`gemini-embedding-001`):** ë¶„ì„ì´ ëë‚œ í…ìŠ¤íŠ¸ ë°ì´í„° ì—­ì‹œ ê°œë³„ í˜¸ì¶œì´ ì•„ë‹Œ ë°°ì—´(Array) ë‹¨ìœ„ë¡œ ë¬¶ì–´ í•œ ë²ˆì— 768ì°¨ì› ì„ë² ë”© ê°’ìœ¼ë¡œ ì¹˜í™˜ í›„ DBì— ì ì¬í•¨.
  3. **ìœ ì € ì¶”ì²œ (`gemini-2.5-flash`):** ì‹¤ì‹œê°„ ë¬¸ë§¥ íŒŒì•…ì´ ì¤‘ìš”í•œ ê²€ìƒ‰ ì˜ì—­ì—ëŠ” ì§€ì—° ì‹œê°„ì´ ì§§ê³  í’ˆì§ˆì´ ë†’ì€ ëª¨ë¸ì„ ë‹¨ê±´ìœ¼ë¡œ ì‚¬ìš©í•´ ìœ ì € ì²´ê° ì†ë„ë¥¼ ë†’ì„.
  4. **ìš°íšŒ í´ë°± (`gemini-2.5-flash-lite`):** ì‚¬ìš©ì íŠ¸ë˜í”½ ê¸‰ì¦ ì‹œ ë©”ì¸ ëª¨ë¸ì´ Rate Limitì— ë„ë‹¬í•˜ë©´ ì¦‰ê° ê°€ì¥ ê°€ë³ê³  í• ë‹¹ëŸ‰ì´ ë„‰ë„‰í•œ Lite ëª¨ë¸ë¡œ ìš”ì²­ì„ ëŒë¦¬ë„ë¡ ì˜ˆì™¸ ì²˜ë¦¬(Try-Catch Fallback)ë¥¼ êµ¬ì¶•.
* **Result:** ì œê³µë˜ëŠ” í•œì •ëœ API ê°€ìš© ìì›(RPD/RPM) ë‚´ì—ì„œë„ ë§‰í˜ ì—†ëŠ” ìˆ˜ì§‘ íŒŒì´í”„ë¼ì¸ê³¼ ì•ˆì •ì ì¸ ì„œë¹„ìŠ¤ ì‘ë‹µì„ ë³´ì¥í•˜ëŠ” ê³ íš¨ìœ¨ ì•„í‚¤í…ì²˜ë¥¼ ì™„ì„±í•¨.

---

## 4. ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ ê°œìš” 

* **í”„ë¡ íŠ¸ì—”ë“œ (Frontend Layer):** Next.js 15 (App Router) ê¸°ë°˜ ì´ˆê³ ì† ë Œë”ë§. Framer-Motionì„ ì´ìš©í•œ ë¶€ë“œëŸ¬ìš´ UI ì „í™˜ ë° React Swiper ì—°ë™. SPA(Single Page Application) ê²½í—˜ ê·¹ëŒ€í™”ë¥¼ ìœ„í•œ ì»´í¬ë„ŒíŠ¸ ì´ë²¤íŠ¸ ê¸°ë°˜ ìƒíƒœ ê´€ë¦¬.
* **ë°±ì—”ë“œ (Backend & BaaS):** Next.js Server Actionsë¥¼ í™œìš©í•œ ì•ˆì „í•˜ê³  ë¹ ë¥¸ API í†µì‹  êµ¬ì¡° ì„¤ê³„ ë° Supabase (PostgreSQL + pgvector) ì—°ë™.
* **í¬ë¡¤ë§ (Data Pipeline):** Python ê¸°ë°˜ ë…ë¦½ ë™ì‘ í¬ë¡¤ëŸ¬. ì •ê·œí™” ë° AI 1ì°¨ ë¶„ë¥˜ í›„ DB ì ì¬. 
> **í¬ë¡¤ëŸ¬ ì‹œìŠ¤í…œ ìƒì„¸ :** [HOTDEAL_SCRAPER Repository](https://github.com/RohUkJin/HOTDEAL_SCRAPER)

## 5. ê¸°ìˆ  ìŠ¤íƒ 
* **Client:** Next.js 15, React(TypeScript), Styled-Components, Framer Motion
* **Backend:** Next.js Server Actions 
* **DB/BaaS:** Supabase (PostgreSQL + pgvector)
* **AI:** Google Gen AI SDK (Gemini)
